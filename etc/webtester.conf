/*
  WebTester (webtester) config file

  Edit this file on your own risk

  Written (by Nazgul) under GPL
*/

"CORE" "CORE settings"
  {
    "Paths" [
              /home/webtester/var/kylix/bin
              /home/webtester/lib
              /home/webtester/lib/plugins
              /home/webtester/lib/modules
            ]

    "CPUMask"              "auto"
    "CPUAutodetectScript"  "cat /proc/cpuinfo | grep -c processor | awk ' { printf \"0\"; for (i=1; i<$1; i++) printf \",%d\",i }'"

    "TemporaryDir" "/home/webtester/tmp"
  }

"Server" "Sever based settings"
  {
    "IPC" "IPC stuff settings"
      {
        "Host"   "*"
        "Port"   13666
      }

    "MainLoop" "Testing mainloop settings"
      {
        "QueueSize"       4
        "BeltsSize"       4

        "QueueUpdateInterval"  1.0  /* secs */
        "BeltsUpdateInterval"  0.5  /* secs */
        "UploadInterval"       4.0  /* secs */

        "UnpackInterval"  0.2  /* secs */
        "UnpackCount"     1

        "Delay"           0.1  /* secs */
      }
    
    "Scheduler" ""
      {
        "OverviewInterval"  0.5  /* secs */
      }

    "Plugins" "Ladable plugins"
      {
        "WebInterface" "WebIntrface plugin settings"
          {
            "INET_Addr"      "tester.sch9:443"
            "INET_Gateway"   "/tester/"

            "INET_Login"     "login"
            "INET_Pass1"     "pass1"
            "INET_Pass2"     "pass2"

            "Proxy"          ""

            "UseSSL"         "TRUE" 
            "SSL-CA-File"    ""
          }

        "rundll"       "LibRUN WT back-end"
      }

    "Modules" "Modules for testing stuff"
      {
        // module_name   module_id
        "nullmodule"  "-1"

        "Informatics"      "0"
          {
            // Max count of testing threads
            "MaxThreads"   "4"

            // Parameters to send to WebInterface
            "RetProps"     [ POINTS ERRORS COMPILER_MESSAGES TESTS REPORT ]

            // Directories
            "DataDir"      "/home/webtester/var/data/Informatics"
            "ProblemsDir"  "problems"
            "TestingDir"   "/home/webtester/tmp/testing"

            /* Interval to unlink all unwanted data in testing dir */
            "UnlinkInterval"     "30.0" /* secs */
            "KeepAliveTestdirs"  "1000"

            "Tests" ""
              {
                "InputExtension"   ".tst"
                "OutputExtension"  ".ans"
              }

            "Checker"      "Checker's settings"
              {
                "Command" "checker ${cur_data_dir}/${test}.tst ${cur_testing_dir}/${output_file} ${cur_data_dir}/${test}.ans -s"
                "Limits"  ""
                  {
                    "RSS"    "40960"  /* Kbytes */
                    "Time"   "10.0"   /* secs */
                  }
                "UploadInterval"  "4.0" /* secs */
                "StorageDir"      "checkers"

                "CompilerFlags" ""
                  {
                    "GCC"  "-L/home/webtester/lib -I/home/webtester/include -ltestlib"
                    "G++"  "-L/home/webtester/lib -I/home/webtester/include -ltestlib -ltestlib++"
                    "FPC"  "-Fu/home/webtester/var/fpc/units -Fl/home/webtester/var/fpc/lib -Fo/home/webtester/var/fpc/obj"
                  }
              }

            "FileToExec"   "solution" /* File to execute */
            "SourceFile"   "solution" /* Name of source file (without extension) */

            "SolutionExec-User"         "webtester-nobody"
            "SolutionExec-Group"        "webtester-nobody"

            "CompilerFlags" ""
              {
                "GCC"  ""
              }
 
            "ProblemUploader" "Problem's uploader settings"
              {
                "SMB-Workgroup"  "schoolnet"
                "SMB-Login"      "webtester"
                "SMB-Password"   "assword"

                "SMB-Server"     "192.168.0.9"
                "SMB-Share"      "webtester-storage"

                "ServerProblemsRoot"   "problems"
              }
            
            
            "ChRoot" "TRUE"
          }
      }

    "Compilers" "Compilers' parameters"
      {
        "Limits" "Resource usage limits"
          {
            "RSS"    "40900" /* Kbytes */
            "Time"   "60.0"  /* secs */
          }

        "GCC" "GNU C Compiler"
          {
            "Extension"       ".c"
            "OutputExtension" ""
            "Command"         "/usr/bin/gcc -g -O2 ${flags} -o ${output} ${source}"
          }

        "G++" "GNU C++ Compiler"
          {
            "Extension"       ".cxx"
            "OutputExtension" ""
            "Command"         "/usr/bin/g++ -g -O2 ${flags} -o ${output} ${source}"
          }

        "FPC" "Free Pascal Compiler"
          {
            "Extension"       ".pas"
            "OutputExtension" ""
            "Command"         "/usr/bin/fpc -O2 ${flags}  -o${output} ${source}"
          }

        "DCC" "Delphi Compiler for Linix"
          {
            "Extension"       ".pas"
            "OutputExtension" ""
            "Command"         "dcc -o ${output} ${source}"

          }
      }
  }

"LibRUN" "LibRUN profiling stuff settings"
  {
    "DefaultUser"    "webtester"
    "DefaultGroup"   "webtester"
  
    "HyperVisor" ""
      {
        "Pool" "Pool of acct info"
          {
            // Lifetime of info in pool. integer secs.
            "Lifetime"    "120"

            // Size of array.
            "ArraySize"   "512"
          }

        // Timeout to affirm process is zombie. secs.
        "ZombieTimeout"    "5.0"

        // Delay in GetStats stuff. secs.
        "GetStatsDelay"     "0.01"
        // Time limit of GetStats stuff. secs.
        "GetStatsTimelimit" "4.5"

        // Delay in hypervisor stuff. secs.
        "Delay"            "0.01"
      }

    "LRVM" ""
      {
        // Timeout for answer from LRVM. secs.
        "AnsTimeout"  "4.0"
        "Host"        "127.0.0.1"

        "SockReadDelay"    "0.0001"  /* secs */
        "SockReadTimeout"  "10"      /* secs */
        
        "ConfigFile"       "/home/webtester/conf/lrvm.conf"
      }

    "IPC" "IPC built-in settings"
      {
        "Host"             "127.0.0.1"
        "Port"             "13667"
        "MaxClients"       "1024"

        "MaxKeepTimeout"   "120.0" /* secs */
      }

    "Limits" "Peak RUsage limits"
      {
        "Time"  "60.0"    /* secs */
        "RSS"   "512000"  /* Kbytes */
      }

    "Corrections" "Corrections to taskstats"
      {
        "RSS"      "-300"  /* Kbytes */
        "Time"     "0"  /* secs  */
      }
  }
